
{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="text-primary mb-0">Kindergarten Special Communication</h4>
    <div class="text-end small text-muted">
      Term: <strong>{{ term }}</strong> &nbsp;
      Year: <strong>{{ year }}</strong>
    </div>
  </div>

  <div class="alert alert-info small">
    Use this form to set a <strong>Special Communication</strong> message
    for all Kindergarten learners or a single class (KG1, KG2, KG3).
    Existing messages will only be overwritten if you tick
    <strong>Override existing</strong>.
  </div>

  <form method="post" class="border rounded p-3 bg-light">
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label mb-1">Scope</label>
        <select name="scope" class="form-select form-select-sm">
          <option value="all_kindergarten">All Kindergarten (KG1 + KG2 + KG3)</option>
          <option value="class">Single class only</option>
        </select>
        <div class="form-text">
          If you choose "Single class", pick the class below.
        </div>
      </div>

      <div class="col-md-4">
        <label class="form-label mb-1">Class (optional)</label>
        <select name="class_name" class="form-select form-select-sm">
          <option value="">-- choose class --</option>
          {% for c in ["KG1","KG2","KG3"] %}
            <option value="{{ c }}">{{ c }}</option>
          {% endfor %}
        </select>
        <div class="form-text">
          Only used when scope is "Single class".
        </div>
      </div>

      <div class="col-md-4 d-flex align-items-end">
        <div class="form-check">
          <input class="form-check-input"
                 type="checkbox"
                 id="override_existing"
                 name="override_existing">
          <label class="form-check-label small" for="override_existing">
            Override existing messages
          </label>
        </div>
      </div>
    </div>

    <div class="mt-3">
      <label class="form-label mb-1">Special Communication text</label>
      <textarea name="special_communication"
                rows="3"
                class="form-control form-control-sm"
                placeholder="e.g. All Kindergarten parents are reminded to pick learners by 1:00pm on closing day..."></textarea>
    </div>

    <div class="mt-3 d-flex justify-content-between">
      <a href="{{ url_for('reports_hub') }}" class="btn btn-outline-secondary btn-sm">
        &larr; Back
      </a>
      <button type="submit" class="btn btn-primary btn-sm">
        Apply to selected learners
      </button>
    </div>
  </form>
</div>
{% endblock %}
