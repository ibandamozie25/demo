
{% extends "base.html" %}
{% block content %}
<div class="container mt-3">
  <h4 class="text-primary">Manage Character Items</h4>

  <form method="get" class="row g-2 mb-3">
    <div class="col-md-3">
      <label class="form-label mb-0">Term</label>
      <select name="term" class="form-select form-select-sm">
        {% for t in ["Term 1","Term 2","Term 3"] %}
          <option value="{{t}}" {% if t==term %}selected{% endif %}>{{t}}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-3">
      <label class="form-label mb-0">Class (optional)</label>
      <input name="class_name" class="form-control form-control-sm" value="{{class_name}}" placeholder="e.g Baby">
      <div class="form-text">Leave blank to manage items for all classes.</div>
    </div>
     <a
        class="btn btn-sm btn-outline-dark"
        href="{{url_for('reports_hub')}}"> Back to Reports
      </a>
	  
	  
    <div class="col-md-6 d-flex align-items-end gap-2">
      <button class="btn btn-sm btn-primary">Load</button>
    </div>
  </form>

  <div class="card mb-3">
    <div class="card-header">Add Item</div>
    <div class="card-body">
      <form method="post" class="row g-2">
        <input type="hidden" name="action" value="add">

        <div class="col-md-3">
          <input name="area" class="form-control form-control-sm" placeholder="Area" required>
        </div>
        <div class="col-md-3">
          <input name="section" class="form-control form-control-sm" placeholder="Section (optional)">
        </div>
        <div class="col-md-2">
          <select name="term_no" class="form-select form-select-sm">
            <option value="{{term_no}}">This term</option>
            <option value="ALL">All terms</option>
            <option value="1">Term 1</option>
            <option value="2">Term 2</option>
            <option value="3">Term 3</option>
          </select>
        </div>
        <div class="col-md-2">
          <input name="class_name" class="form-control form-control-sm" value="{{class_name}}" placeholder="Class or ALL">
        </div>

        <div class="col-md-2">
          <input name="sort_order" type="number" class="form-control form-control-sm" value="0">
        </div>

        <div class="col-md-4">
          <input name="skill_label" class="form-control form-control-sm" placeholder="Skill label" required>
        </div>
        <div class="col-md-6">
          <input name="description" class="form-control form-control-sm" placeholder="Description" required>
        </div>
        <div class="col-md-2 d-flex align-items-center gap-2">
          <label class="small mb-0"><input type="checkbox" name="is_active" checked> Active</label>
          <button class="btn btn-sm btn-success">Add</button>
        </div>
      </form>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-sm table-bordered align-middle">
      <thead class="table-light">
        <tr>
          <th>Area</th><th>Section</th><th>Term</th><th>Class</th>
          <th>Skill</th><th>Description</th><th>Order</th><th>Active</th><th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for it in items %}
        <tr>
          <form method="post">
            <input type="hidden" name="action" value="update">
            <input type="hidden" name="id" value="{{it.id}}">
            <td><input name="area" class="form-control form-control-sm" value="{{it.area}}"></td>
            <td><input name="section" class="form-control form-control-sm" value="{{it.section or ''}}"></td>

            <td>
              <select name="term_no" class="form-select form-select-sm">
                <option value="ALL" {% if it.term_no is none %}selected{% endif %}>All</option>
                {% for n in [1,2,3] %}
                  <option value="{{n}}" {% if it.term_no==n %}selected{% endif %}>{{n}}</option>
                {% endfor %}
              </select>
            </td>

            <td><input name="class_name" class="form-control form-control-sm" value="{{it.class_name if it.class_name else 'ALL'}}"></td>

            <td><input name="skill_label" class="form-control form-control-sm" value="{{it.skill_label}}"></td>
            <td><input name="description" class="form-control form-control-sm" value="{{it.description}}"></td>
            <td style="width:90px"><input name="sort_order" type="number" class="form-control form-control-sm" value="{{it.sort_order or 0}}"></td>
            <td class="text-center">
              <input type="checkbox" name="is_active" {% if it.is_active %}checked{% endif %}>
            </td>
            <td class="d-flex gap-2">
              <button class="btn btn-sm btn-primary">Save</button>
          </form>

          <form method="post" onsubmit="return confirm('Disable this item?');">
            <input type="hidden" name="action" value="delete">
            <input type="hidden" name="id" value="{{it.id}}">
            <button class="btn btn-sm btn-outline-danger">Disable</button>
          </form>
            </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

